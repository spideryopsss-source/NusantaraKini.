<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Detail Berita</title>

    <!-- STYLE UTAMA -->
    <link rel="stylesheet" href="style.css" />
    <style>
    /* ========================
        TOMBOL KEMBALI
    ========================= */
    .back-btn {
        display: inline-block;
        margin: 15px;
        padding: 10px 15px;
        background: black;
        color: white;
        text-decoration: none;
        border-radius: 6px;
        font-weight: bold;
        transition: 0.3s;
        font-size: 16px;
    }
    .dark-mode .back-btn {
        background: white;
        color: black;
    }

    /* DETAIL */
    .detail-img {
        width: 100%;
        max-width: 900px;
        border-radius: 10px;
        margin: 20px 0;
    }
    .detail-text {
        font-size: 16px;
        line-height: 1.7;
    }

    /* HEADER INFO */
    .top-info {
        display: flex;
        gap: 25px;
        font-size: 16px; /* diperbesar */
        margin-left: 25px;
        margin-top: -10px;
        font-weight: 600;
    }

    /* MODE BUTTON */
    .mode-btn {
        padding: 10px 12px;
        border-radius: 50%;
        border: none;
        cursor: pointer;
        background: #222;
        color: white;
        font-size: 22px;
        margin-left: 20px;
        transition: 0.3s;
    }
    </style>
</head>
<body>

    <!-- Tombol kembali -->
    <a href="index.html" class="back-btn">‚Üê Kembali</a>

    <!-- HEADER + MODE + INFO -->
    <header class="header">
        <div class="logo" id="logo-text">
            <span class="red">Nusantara</span>Kini
        </div>

        <div style="display:flex; align-items:center; gap:20px;">
            <!-- MODE BUTTON -->
            <button id="mode-btn" class="mode-btn">üåô</button>

            <!-- INFO JAM, CUACA DLL -->
            <div class="top-info">
                <span id="jam">00:00</span>
                <span id="lokasi">Mendeteksi lokasi...</span>
                <span id="cuaca">Cuaca...</span>
                <span id="temperature">--¬∞C</span>
            </div>
        </div>
    </header>

    <!-- Container Detail Berita -->
    <section class="detail-container">
        <h1 id="detail-judul"></h1>
        <img id="detail-img" class="detail-img" alt="Gambar Berita" />
        <div id="detail-isi" class="detail-text"></div>
    </section>

    <!-- LOAD DATA -->
    <script src="data.js" defer></script>

    <!-- Script lokal untuk halaman detail -->
    <script defer>
    document.addEventListener('DOMContentLoaded', () => {
        // Ambil id berita dari URL
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get("id");

        // Pastikan data tersedia (data.js harus mendefinisikan beritaData)
        if (typeof beritaData === 'undefined') {
            document.querySelector('.detail-container').innerHTML =
                "<h2>Data berita tidak tersedia.</h2>";
            return;
        }

        const semuaBerita = Object.values(beritaData).flat();
        const data = semuaBerita.find(item => item.id == id);

        if (data) {
            document.getElementById("detail-judul").textContent = data.judul;
            document.getElementById("detail-img").src = data.img || '';
            document.getElementById("detail-img").alt = data.judul || 'Gambar Berita';

            // --- Perbaikan supaya paragraf tidak nyambung ---
            const isiContainer = document.getElementById("detail-isi");
            isiContainer.innerHTML = ""; // kosongkan isi lama

            // Jika isi berupa array paragraf
            if (Array.isArray(data.isi)) {
                data.isi.forEach(p => {
                    const tag = document.createElement("p");
                    tag.textContent = p;
                    isiContainer.appendChild(tag);
                });
            }
            // Jika isi berupa string: pisah berdasarkan double newline, atau jika tidak ada, buat per kalimat paragraf
            else if (typeof data.isi === "string") {
                let paragrafList = [];
                if (data.isi.includes("\n\n")) {
                    paragrafList = data.isi.split("\n\n");
                } else if (data.isi.includes("\n")) {
                    paragrafList = data.isi.split("\n");
                } else {
                    // fallback: pisah per kalimat (jaga agar paragraf tidak terlalu pendek)
                    paragrafList = data.isi.split(/(?<=\.)\s+/);
                }

                paragrafList.forEach(p => {
                    const tag = document.createElement("p");
                    tag.textContent = p.trim();
                    isiContainer.appendChild(tag);
                });
            }
        } else {
            document.querySelector(".detail-container").innerHTML =
                "<h2>Berita tidak ditemukan.</h2>";
        }

        // MODE GELAP / TERANG (safe - jika elemen ada)
        const modeBtn = document.getElementById("mode-btn");
        const logoText = document.querySelector(".logo .red"); // bagian "Nusantara"

        if (modeBtn) {
            modeBtn.addEventListener("click", () => {
                document.body.classList.toggle("dark-mode");

            localStorage.setItem(
    "theme",
    document.body.classList.contains("dark-mode") ? "dark" : "light"
);

                if (document.body.classList.contains("dark-mode")) {
                    modeBtn.textContent = "‚òÄÔ∏è";
                    if (logoText) logoText.style.color = "white";
                } else {
                    modeBtn.textContent = "üåô";
                    if (logoText) logoText.style.color = "red";
                }
            });
        }

        // JAM REALTIME
        function updateJam() {
            const now = new Date();
            const el = document.getElementById("jam");
            if (el) el.textContent =
                now.toLocaleTimeString("id-ID", { hour: "2-digit", minute: "2-digit" });
        }
        setInterval(updateJam, 1000);
        updateJam();

        // LOKASI + CUACA (contoh static)
        function updateCuaca(lat, lon) {
            const cu = document.getElementById("cuaca");
            const t = document.getElementById("temperature");
            if (cu) cu.textContent = "Cerah Berawan";
            if (t) t.textContent = "27¬∞C";
        }

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(pos => {
                const lat = pos.coords.latitude.toFixed(2);
                const lon = pos.coords.longitude.toFixed(2);
                const lok = document.getElementById("lokasi");
                if (lok) lok.textContent = `Lokasi: ${lat}, ${lon}`;
                updateCuaca(lat, lon);
            }, () => {
                const lok = document.getElementById("lokasi");
                if (lok) lok.textContent = "Lokasi tidak diizinkan";
            });
        } else {
            const lok = document.getElementById("lokasi");
            if (lok) lok.textContent = "Lokasi tidak didukung";
        }
    });
        
        (function () {
    const theme = localStorage.getItem("theme");
    if (theme === "dark") {
        document.body.classList.add("dark-mode");
        const btn = document.getElementById("mode-btn");
        if (btn) btn.textContent = "‚òÄÔ∏è";
    }
})();

    </script>
</body>
</html>



